# –£–ª—É—á—à–µ–Ω–∏—è –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

## üöÄ –ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞!

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏, —É–¥–∞–ª–µ–Ω–∏–∏ –∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–∏ —Å–æ–±—ã—Ç–∏–π —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–µ—Ä–µ–±—Ä–æ—Å –Ω–∞–≤–µ—Ä—Ö.

## ‚ú® –ö–ª—é—á–µ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `@st.fragment`**

–†–∞–∑–¥–µ–ª–∏–ª–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã:

- **`event_browser()`** - –ë—Ä–∞—É–∑–µ—Ä —Å–æ–±—ã—Ç–∏–π —Å –ø–æ–∏—Å–∫–æ–º –∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
- **`funnel_step_manager()`** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à–∞–≥–∞–º–∏ –≤–æ—Ä–æ–Ω–∫–∏

```python
@st.fragment
def event_browser():
    """Fragment for browsing and adding events without full page reloads"""

@st.fragment  
def funnel_step_manager():
    """Fragment for managing funnel steps without full page reloads"""
```

### 2. **Toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤–º–µ—Å—Ç–æ alert**

–ó–∞–º–µ–Ω–∏–ª–∏ –≥—Ä–æ–º–æ–∑–¥–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–∞ —ç–ª–µ–≥–∞–Ω—Ç–Ω—ã–µ toast:

```python
# –í–º–µ—Å—Ç–æ st.success/st.warning
st.toast(f"‚úÖ Added: {event_name}", icon="‚úÖ")
st.toast("‚ö†Ô∏è Already in funnel!", icon="‚ö†Ô∏è")
```

### 3. **–£–º–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è**

–°–æ—Å—Ç–æ—è–Ω–∏–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Ä–µ–∞–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö:

```python
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
if search_query != st.session_state.search_query:
    st.session_state.search_query = search_query
```

### 4. **–£–ª—É—á—à–µ–Ω–Ω—ã–µ –∫–ª—é—á–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**

–£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—é—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã:

```python
add_key = f"add_event_{event_name}_{hash(event_name) % 10000}"
```

### 5. **–ö–æ–º–ø–∞–∫—Ç–Ω—ã–π —Å–∞–π–¥–±–∞—Ä**

–£–ª—É—á—à–µ–Ω –¥–∏–∑–∞–π–Ω –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ —Å–∞–π–¥–±–∞—Ä–µ:

```python
# –ö–æ–º–ø–∞–∫—Ç–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ –∏ –∞–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞
col_add, col_clear = st.columns([1, 1])
with col_add:
    if st.button("‚ö°", ...):  # –ö–æ–º–ø–∞–∫—Ç–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
```

## üéØ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç

### –î–æ —É–ª—É—á—à–µ–Ω–∏–π:
- ‚ùå –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –¥–µ–π—Å—Ç–≤–∏–∏
- ‚ùå –ü–µ—Ä–µ–±—Ä–æ—Å –Ω–∞–≤–µ—Ä—Ö —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- ‚ùå –ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- ‚ùå –ì—Ä–æ–º–æ–∑–¥–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### –ü–æ—Å–ª–µ —É–ª—É—á—à–µ–Ω–∏–π:
- ‚úÖ –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ –¥–µ–π—Å—Ç–≤–∏—è
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
- ‚úÖ –≠–ª–µ–≥–∞–Ω—Ç–Ω—ã–µ toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- ‚úÖ –ü–ª–∞–≤–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –±–µ–∑ —Ä–∞–∑—Ä—ã–≤–æ–≤

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### Fragment –∏–∑–æ–ª—è—Ü–∏—è
–ö–∞–∂–¥—ã–π fragment —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ, –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—è —Ç–æ–ª—å–∫–æ —Å–≤–æ—é —á–∞—Å—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.

### –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è st.rerun()
`st.rerun()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ.

### –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Å—Å–∏–∏
–ë–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ session state —Å –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è.

## üöÄ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ä–∞–±–æ—Ç–∞–µ—Ç –±—ã—Å—Ç—Ä–æ –∏ –ø–ª–∞–≤–Ω–æ:

1. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π** - –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
2. **–ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —à–∞–≥–æ–≤** - –ø–ª–∞–≤–Ω–æ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –ø–æ–∑–∏—Ü–∏–∏
3. **–£–¥–∞–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π** - –±—ã—Å—Ç—Ä–æ —Å –∫—Ä–∞—Å–∏–≤—ã–º–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏
4. **–ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è** - —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ –±–µ–∑ –ª–∞–≥–æ–≤

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –≤–æ—Ä–æ–Ω–∫–∞–º–∏ –ª—é–±–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –±–µ–∑ —Ä–∞–∑–¥—Ä–∞–∂–∞—é—â–∏—Ö –ø–µ—Ä–µ–±—Ä–æ—Å–æ–≤ –Ω–∞–≤–µ—Ä—Ö —Å—Ç—Ä–∞–Ω–∏—Ü—ã! 